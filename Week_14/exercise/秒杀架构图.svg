<svg id="SvgjsSvg1311" width="956.796875" height="1040.578125" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1312"><pattern id="SvgjsPattern1315" x="0" y="0" width="40" height="76" patternUnits="userSpaceOnUse"><image id="SvgjsImage1316" xlink:href="https://processon.com/assets/images/designer/network/iphone.svg" width="40" height="76" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1323" x="0" y="0" width="76" height="69" patternUnits="userSpaceOnUse"><image id="SvgjsImage1324" xlink:href="https://processon.com/assets/images/designer/network/mac.svg" width="76" height="69" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1331" x="0" y="0" width="60" height="76" patternUnits="userSpaceOnUse"><image id="SvgjsImage1332" xlink:href="https://processon.com/assets/images/designer/network/tab.svg" width="60" height="76" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><pattern id="SvgjsPattern1339" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse"><image id="SvgjsImage1340" xlink:href="https://iconsapi.com/5ee2bbdbe4b0b788a9362ee2.svg" width="100" height="100" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1351" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1352" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1355" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1356" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1359" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1360" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1363" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1364" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><pattern id="SvgjsPattern1383" x="0" y="0" width="76" height="76" patternUnits="userSpaceOnUse"><image id="SvgjsImage1384" xlink:href="https://processon.com/assets/images/designer/network_aliyun/Network/SLB.svg" width="76" height="76" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1391" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1392" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1395" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1396" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><pattern id="SvgjsPattern1423" x="0" y="0" width="60" height="76" patternUnits="userSpaceOnUse"><image id="SvgjsImage1424" xlink:href="https://processon.com/assets/images/designer/network_aws/applicationservers/Application-Services_AmazonAPIGateway.svg" width="60" height="76" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1431" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1432" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1457" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1458" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><pattern id="SvgjsPattern1461" x="0" y="0" width="75" height="75" patternUnits="userSpaceOnUse"><image id="SvgjsImage1462" xlink:href="https://processon.com/assets/images/designer/network_aws/database/Database_AmazonElasticCache_Redis.svg" width="75" height="75" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1469" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1470" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><pattern id="SvgjsPattern1477" x="0" y="0" width="75" height="75" patternUnits="userSpaceOnUse"><image id="SvgjsImage1478" xlink:href="https://processon.com/assets/images/designer/network_aliyun/ElasticCalculation/ECS.svg" width="75" height="75" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1485" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1486" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1493" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1494" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1521" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1522" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><pattern id="SvgjsPattern1531" x="0" y="0" width="75" height="75" patternUnits="userSpaceOnUse"><image id="SvgjsImage1532" xlink:href="https://processon.com/assets/images/designer/network_aws2019/ai/Amazon-MQ.svg" width="75" height="75" preserveAspectRatio="none" crossOrigin="anonymous" x="0" y="0"></image></pattern><marker id="SvgjsMarker1539" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1540" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1555" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1556" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1563" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1564" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker></defs><g id="SvgjsG1313" transform="translate(402.38839285714346,25.00669642857143)"><path id="SvgjsPath1314" d="M 0 0L 40 0L 40 76L 0 76Z" stroke="none" fill="url(#SvgjsPattern1315)"></path><g id="SvgjsG1317"><text id="SvgjsText1318" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="81.375" transform="rotate(0)"><tspan id="SvgjsTspan1319" dy="16" x="20"><tspan id="SvgjsTspan1320" style="text-decoration:;">手机</tspan></tspan></text></g></g><g id="SvgjsG1321" transform="translate(503.3883928571438,28.50669642857143)"><path id="SvgjsPath1322" d="M 0 0L 76 0L 76 69L 0 69Z" stroke="none" fill="url(#SvgjsPattern1323)"></path><g id="SvgjsG1325"><text id="SvgjsText1326" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="116px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="74.375" transform="rotate(0)"><tspan id="SvgjsTspan1327" dy="16" x="38"><tspan id="SvgjsTspan1328" style="text-decoration:;">电脑</tspan></tspan></text></g></g><g id="SvgjsG1329" transform="translate(634.8883928571444,25.00669642857143)"><path id="SvgjsPath1330" d="M 0 0L 60 0L 60 76L 0 76Z" stroke="none" fill="url(#SvgjsPattern1331)"></path><g id="SvgjsG1333"><text id="SvgjsText1334" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="81.375" transform="rotate(0)"><tspan id="SvgjsTspan1335" dy="16" x="30"><tspan id="SvgjsTspan1336" style="text-decoration:;">平板</tspan></tspan></text></g></g><g id="SvgjsG1337" transform="translate(491.3883928571438,189.00669642857142)"><path id="SvgjsPath1338" d="M 0 0L 100 0L 100 100L 0 100Z" stroke="none" fill="url(#SvgjsPattern1339)"></path></g><g id="SvgjsG1341" transform="translate(506.3883928571438,278.57812499999994)"><path id="SvgjsPath1342" d="M 0 0L 70 0L 70 37L 0 37Z" stroke="none" fill="none"></path><g id="SvgjsG1343"><text id="SvgjsText1344" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="70px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1345" dy="16" x="35"><tspan id="SvgjsTspan1346" style="text-decoration:;">浏览器/客</tspan></tspan><tspan id="SvgjsTspan1347" dy="16" x="35"><tspan id="SvgjsTspan1348" style="text-decoration:;">户端</tspan></tspan></text></g></g><g id="SvgjsG1349"><path id="SvgjsPath1350" d="M422.38839285714346 101.00669642857144L422.38839285714346 143.79241071428572L541.3883928571439 143.79241071428572L541.3883928571439 189.00669642857142" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1351)"></path></g><g id="SvgjsG1353"><path id="SvgjsPath1354" d="M541.3883928571439 97.50669642857144L541.3883928571439 142.04241071428572L541.3883928571439 142.04241071428572L541.3883928571439 189.00669642857142" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1355)"></path></g><g id="SvgjsG1357"><path id="SvgjsPath1358" d="M664.8883928571445 101.00669642857144L664.8883928571445 143.79241071428572L541.3883928571439 143.79241071428572L541.3883928571439 189.00669642857142" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1359)"></path></g><g id="SvgjsG1361"><path id="SvgjsPath1362" d="M388.3519497084552 240.56255395079984L438.0662354227412 240.56255395079984L438.0662354227412 240.56255395079984L487.7805211370271 240.56255395079984" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1363)"></path></g><g id="SvgjsG1365" transform="translate(256.3883928571429,194.00669642857144)"><path id="SvgjsPath1366" d="M 0 0L 138 0L 138 90L 0 90Z" stroke="none" fill="none"></path><g id="SvgjsG1367"><text id="SvgjsText1368" font-family="微软雅黑" text-anchor="start" font-size="12px" width="138px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-1.5" transform="rotate(0)"><tspan id="SvgjsTspan1369" dy="15" x="0"><tspan id="SvgjsTspan1370" style="text-decoration:;">1. 未开始秒杀按钮置灰</tspan></tspan><tspan id="SvgjsTspan1371" dy="15" x="0"><tspan id="SvgjsTspan1372" style="text-decoration:;">2. 开始后限制按钮点击频</tspan></tspan><tspan id="SvgjsTspan1373" dy="15" x="0"><tspan id="SvgjsTspan1374" style="text-decoration:;">率</tspan></tspan><tspan id="SvgjsTspan1375" dy="15" x="0"><tspan id="SvgjsTspan1376" style="text-decoration:;">3. 静态资源从CDN获取</tspan></tspan><tspan id="SvgjsTspan1377" dy="15" x="0"><tspan id="SvgjsTspan1378" style="text-decoration:;">4. 秒杀相关动态脚本从流</tspan></tspan><tspan id="SvgjsTspan1379" dy="15" x="0"><tspan id="SvgjsTspan1380" style="text-decoration:;">量网关集群获取</tspan></tspan></text></g></g><g id="SvgjsG1381" transform="translate(503.3883928571438,365.9352678571429)"><path id="SvgjsPath1382" d="M 0 0L 76 0L 76 76L 0 76Z" stroke="none" fill="url(#SvgjsPattern1383)"></path><g id="SvgjsG1385"><text id="SvgjsText1386" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="116px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="81.375" transform="rotate(0)"><tspan id="SvgjsTspan1387" dy="16" x="38"><tspan id="SvgjsTspan1388" style="text-decoration:;">流量网关集群</tspan></tspan></text></g></g><g id="SvgjsG1389"><path id="SvgjsPath1390" d="M541.3883928571439 289.00669642857144L541.3883928571439 326.25669642857144L541.3883928571439 326.25669642857144L541.3883928571439 365.9352678571429" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1391)"></path></g><g id="SvgjsG1393"><path id="SvgjsPath1394" d="M392.107302712393 404.47679220115924L441.8215884266789 404.47679220115924L441.8215884266789 404.47679220115924L491.53587414096444 404.47679220115924" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1395)"></path></g><g id="SvgjsG1397" transform="translate(256.3883928571428,328.41556771136334)"><path id="SvgjsPath1398" d="M 0 0L 138 0L 138 150L 0 150Z" stroke="none" fill="none"></path><g id="SvgjsG1399"><text id="SvgjsText1400" font-family="微软雅黑" text-anchor="start" font-size="12px" width="138px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-1.5" transform="rotate(0)"><tspan id="SvgjsTspan1401" dy="15" x="0"><tspan id="SvgjsTspan1402" style="text-decoration:;">1. 网关限制同一IP每秒请</tspan></tspan><tspan id="SvgjsTspan1403" dy="15" x="0"><tspan id="SvgjsTspan1404" style="text-decoration:;">求次数，超过则加入黑名</tspan></tspan><tspan id="SvgjsTspan1405" dy="15" x="0"><tspan id="SvgjsTspan1406" style="text-decoration:;">单X分钟，在前端则显示</tspan></tspan><tspan id="SvgjsTspan1407" dy="15" x="0"><tspan id="SvgjsTspan1408" style="text-decoration:;">秒杀结束</tspan></tspan><tspan id="SvgjsTspan1409" dy="15" x="0"><tspan id="SvgjsTspan1410" style="text-decoration:;">2. 缓存后端生成的商品</tspan></tspan><tspan id="SvgjsTspan1411" dy="15" x="0"><tspan id="SvgjsTspan1412" style="text-decoration:;">token，前端未拿到token</tspan></tspan><tspan id="SvgjsTspan1413" dy="15" x="0"><tspan id="SvgjsTspan1414" style="text-decoration:;">请求，则告知请求参数错</tspan></tspan><tspan id="SvgjsTspan1415" dy="15" x="0"><tspan id="SvgjsTspan1416" style="text-decoration:;">误</tspan></tspan><tspan id="SvgjsTspan1417" dy="15" x="0"><tspan id="SvgjsTspan1418" style="text-decoration:;">3. 使用token生成脚本文</tspan></tspan><tspan id="SvgjsTspan1419" dy="15" x="0"><tspan id="SvgjsTspan1420" style="text-decoration:;">件，供前端获取</tspan></tspan></text></g></g><g id="SvgjsG1421" transform="translate(511.3883928571437,536.0066964285713)"><path id="SvgjsPath1422" d="M 0 0L 60 0L 60 76L 0 76Z" stroke="none" fill="url(#SvgjsPattern1423)"></path><g id="SvgjsG1425"><text id="SvgjsText1426" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="81.375" transform="rotate(0)"><tspan id="SvgjsTspan1427" dy="16" x="30"><tspan id="SvgjsTspan1428" style="text-decoration:;">业务网关集群</tspan></tspan></text></g></g><g id="SvgjsG1429"><path id="SvgjsPath1430" d="M392.10713987180577 574.6843161291085L441.82142558609166 574.6843161291085L441.82142558609166 574.6843161291085L491.53571130037756 574.6843161291085" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1431)"></path></g><g id="SvgjsG1433" transform="translate(256.3883928571428,551.0066964285713)"><path id="SvgjsPath1434" d="M 0 0L 138 0L 138 46L 0 46Z" stroke="none" fill="none"></path><g id="SvgjsG1435"><text id="SvgjsText1436" font-family="微软雅黑" text-anchor="start" font-size="12px" width="138px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-46" transform="rotate(0)"><tspan id="SvgjsTspan1437" dy="15" x="0"><tspan id="SvgjsTspan1438" style="text-decoration:;">1. 黑名单校验</tspan></tspan><tspan id="SvgjsTspan1439" dy="15" x="0"><tspan id="SvgjsTspan1440" style="text-decoration:;">    在黑名单的请求直接拒</tspan></tspan><tspan id="SvgjsTspan1441" dy="15" x="0"><tspan id="SvgjsTspan1442" style="text-decoration:;">绝，并告知前端秒杀结束</tspan></tspan><tspan id="SvgjsTspan1443" dy="15" x="0"><tspan id="SvgjsTspan1444" style="text-decoration:;">2. 登录校验</tspan></tspan><tspan id="SvgjsTspan1445" dy="15" x="0"><tspan id="SvgjsTspan1446" style="text-decoration:;">    未登录，通知前端重新</tspan></tspan><tspan id="SvgjsTspan1447" dy="15" x="0"><tspan id="SvgjsTspan1448" style="text-decoration:;">登录</tspan></tspan><tspan id="SvgjsTspan1449" dy="15" x="0"><tspan id="SvgjsTspan1450" style="text-decoration:;">3. 秒杀接口限流</tspan></tspan><tspan id="SvgjsTspan1451" dy="15" x="0"><tspan id="SvgjsTspan1452" style="text-decoration:;">    限制同一用户每秒请求</tspan></tspan><tspan id="SvgjsTspan1453" dy="15" x="0"><tspan id="SvgjsTspan1454" style="text-decoration:;">次数，超过则加入黑名单</tspan></tspan></text></g></g><g id="SvgjsG1455"><path id="SvgjsPath1456" d="M541.3883928571439 441.9352678571429L541.3883928571439 488.9709821428571L541.3883928571438 488.9709821428571L541.3883928571438 536.0066964285713" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1457)"></path></g><g id="SvgjsG1459" transform="translate(60.53124999999994,656.2447916666663)"><path id="SvgjsPath1460" d="M 0 0L 75 0L 75 75L 0 75Z" stroke="none" fill="url(#SvgjsPattern1461)"></path><g id="SvgjsG1463"><text id="SvgjsText1464" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="115px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.375" transform="rotate(0)"><tspan id="SvgjsTspan1465" dy="16" x="37.5"><tspan id="SvgjsTspan1466" style="text-decoration:;">Redis集群</tspan></tspan></text></g></g><g id="SvgjsG1467"><path id="SvgjsPath1468" d="M256.3883928571428 574.578125L98.03124999999994 574.578125L98.03124999999994 656.2447916666663" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1469)"></path><rect id="SvgjsRect1471" width="119" height="16" x="76.87648809523822" y="566.578125" fill="#ffffff"></rect><text id="SvgjsText1472" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="119px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="564.953125" transform="rotate(0)"><tspan id="SvgjsTspan1473" dy="16" x="136.37648809523822"><tspan id="SvgjsTspan1474" style="text-decoration:;">RequestRateLimiter</tspan></tspan></text></g><g id="SvgjsG1475" transform="translate(504.5133928571438,756.078125)"><path id="SvgjsPath1476" d="M 0 0L 75 0L 75 75L 0 75Z" stroke="none" fill="url(#SvgjsPattern1477)"></path><g id="SvgjsG1479"><text id="SvgjsText1480" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="115px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.375" transform="rotate(0)"><tspan id="SvgjsTspan1481" dy="16" x="37.5"><tspan id="SvgjsTspan1482" style="text-decoration:;">秒杀服务集群</tspan></tspan></text></g></g><g id="SvgjsG1483"><path id="SvgjsPath1484" d="M541.3883928571437 612.0066964285713L541.3883928571437 684.0424107142857L542.0133928571438 684.0424107142857L542.0133928571438 756.078125" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1485)"></path><rect id="SvgjsRect1487" width="65" height="16" x="509.2008928571438" y="676.0424107142857" fill="#ffffff"></rect><text id="SvgjsText1488" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="65px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="674.4174107142857" transform="rotate(0)"><tspan id="SvgjsTspan1489" dy="16" x="541.7008928571438"><tspan id="SvgjsTspan1490" style="text-decoration:;">未在黑名单</tspan></tspan></text></g><g id="SvgjsG1491"><path id="SvgjsPath1492" d="M393.86099423535495 795.1712600369344L443.57527994964096 795.1712600369344L443.57527994964096 795.1712600369344L493.2895656639265 795.1712600369344" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1493)"></path></g><g id="SvgjsG1495" transform="translate(259.1467085210703,749.1100355471383)"><path id="SvgjsPath1496" d="M 0 0L 138 0L 138 90L 0 90Z" stroke="none" fill="none"></path><g id="SvgjsG1497"><text id="SvgjsText1498" font-family="微软雅黑" text-anchor="start" font-size="12px" width="138px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-31.5" transform="rotate(0)"><tspan id="SvgjsTspan1499" dy="15" x="0"><tspan id="SvgjsTspan1500" style="text-decoration:;">1. 校验秒杀是否开始</tspan></tspan><tspan id="SvgjsTspan1501" dy="15" x="0"><tspan id="SvgjsTspan1502" style="text-decoration:;">2. 校验秒杀商品是否售罄</tspan></tspan><tspan id="SvgjsTspan1503" dy="15" x="0"><tspan id="SvgjsTspan1504" style="text-decoration:;">3. 校验放入MQ请求是否</tspan></tspan><tspan id="SvgjsTspan1505" dy="15" x="0"><tspan id="SvgjsTspan1506" style="text-decoration:;">超过秒杀数量X倍(默认：</tspan></tspan><tspan id="SvgjsTspan1507" dy="15" x="0"><tspan id="SvgjsTspan1508" style="text-decoration:;">10)</tspan></tspan><tspan id="SvgjsTspan1509" dy="15" x="0"><tspan id="SvgjsTspan1510" style="text-decoration:;">4. 放入MQ的请求，存储</tspan></tspan><tspan id="SvgjsTspan1511" dy="15" x="0"><tspan id="SvgjsTspan1512" style="text-decoration:;">秒杀token至redis，返回</tspan></tspan><tspan id="SvgjsTspan1513" dy="15" x="0"><tspan id="SvgjsTspan1514" style="text-decoration:;">前端秒杀token，并让前</tspan></tspan><tspan id="SvgjsTspan1515" dy="15" x="0"><tspan id="SvgjsTspan1516" style="text-decoration:;">端使用秒杀token轮询是</tspan></tspan><tspan id="SvgjsTspan1517" dy="15" x="0"><tspan id="SvgjsTspan1518" style="text-decoration:;">否秒杀成功</tspan></tspan></text></g></g><g id="SvgjsG1519"><path id="SvgjsPath1520" d="M503.8883928571437 793.578125L504.7098214285718 793.578125L504.7098214285718 693.7447916666663L135.53124999999994 693.7447916666663" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1521)"></path><rect id="SvgjsRect1523" width="182" height="32" x="279.4479166666668" y="677.7447916666663" fill="#ffffff"></rect><text id="SvgjsText1524" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="182px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="676.1197916666663" transform="rotate(0)"><tspan id="SvgjsTspan1525" dy="16" x="370.4479166666668"><tspan id="SvgjsTspan1526" style="text-decoration:;">秒杀相关信息，秒杀前放至缓存</tspan></tspan><tspan id="SvgjsTspan1527" dy="16" x="370.4479166666668"><tspan id="SvgjsTspan1528" style="text-decoration:;">秒杀时，直接读取缓存</tspan></tspan></text></g><g id="SvgjsG1529" transform="translate(504.58283730158826,913.078125)"><path id="SvgjsPath1530" d="M 0 0L 75 0L 75 75L 0 75Z" stroke="none" fill="url(#SvgjsPattern1531)"></path><g id="SvgjsG1533"><text id="SvgjsText1534" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="115px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="80.375" transform="rotate(0)"><tspan id="SvgjsTspan1535" dy="16" x="37.5"><tspan id="SvgjsTspan1536" style="text-decoration:;">MQ</tspan></tspan></text></g></g><g id="SvgjsG1537"><path id="SvgjsPath1538" d="M542.0133928571438 831.078125L542.0133928571438 872.078125L542.0828373015883 872.078125L542.0828373015883 913.078125" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1539)"></path><rect id="SvgjsRect1541" width="151" height="16" x="466.54811507936597" y="864.078125" fill="#ffffff"></rect><text id="SvgjsText1542" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="151px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="862.453125" transform="rotate(0)"><tspan id="SvgjsTspan1543" dy="16" x="542.048115079366"><tspan id="SvgjsTspan1544" style="text-decoration:;">将正常请求信息发送到MQ</tspan></tspan></text></g><g id="SvgjsG1545" transform="translate(278.1467085210703,915.578125)"><path id="SvgjsPath1546" d="M 0 0L 100 0L 100 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1547"><text id="SvgjsText1548" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="17.375" transform="rotate(0)"><tspan id="SvgjsTspan1549" dy="16" x="50"><tspan id="SvgjsTspan1550" style="text-decoration:;">秒杀消息消费</tspan></tspan><tspan id="SvgjsTspan1551" dy="16" x="50"><tspan id="SvgjsTspan1552" style="text-decoration:;">者</tspan></tspan></text></g></g><g id="SvgjsG1553"><path id="SvgjsPath1554" d="M504.58283730158826 950.578125L441.3647729113293 950.578125L441.3647729113293 950.578125L378.1467085210703 950.578125" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1555)"></path><rect id="SvgjsRect1557" width="104" height="16" x="389.3647729113293" y="942.578125" fill="#ffffff"></rect><text id="SvgjsText1558" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="104px" fill="#323232" font-weight="400" align="top" lineHeight="16px" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="940.953125" transform="rotate(0)"><tspan id="SvgjsTspan1559" dy="16" x="441.3647729113293"><tspan id="SvgjsTspan1560" style="text-decoration:;">顺序消费请求信息</tspan></tspan></text></g><g id="SvgjsG1561"><path id="SvgjsPath1562" d="M159.71813709249875 951.639349489796L209.43242280678476 951.639349489796L209.43242280678476 951.639349489796L259.1467085210703 951.639349489796" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1563)"></path></g><g id="SvgjsG1565" transform="translate(25.00385137821405,905.578125)"><path id="SvgjsPath1566" d="M 0 0L 138 0L 138 90L 0 90Z" stroke="none" fill="none"></path><g id="SvgjsG1567"><text id="SvgjsText1568" font-family="微软雅黑" text-anchor="start" font-size="12px" width="138px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="12px" weight="400" font-style="" opacity="1" y="-31.5" transform="rotate(0)"><tspan id="SvgjsTspan1569" dy="15" x="0"><tspan id="SvgjsTspan1570" style="text-decoration:;">1. 校验该用户是否已购买</tspan></tspan><tspan id="SvgjsTspan1571" dy="15" x="0"><tspan id="SvgjsTspan1572" style="text-decoration:;">2. 校验商品是否售罄</tspan></tspan><tspan id="SvgjsTspan1573" dy="15" x="0"><tspan id="SvgjsTspan1574" style="text-decoration:;">3. 校验失败则发送失败信</tspan></tspan><tspan id="SvgjsTspan1575" dy="15" x="0"><tspan id="SvgjsTspan1576" style="text-decoration:;">息到MQ，供秒杀服务消</tspan></tspan><tspan id="SvgjsTspan1577" dy="15" x="0"><tspan id="SvgjsTspan1578" style="text-decoration:;">费</tspan></tspan><tspan id="SvgjsTspan1579" dy="15" x="0"><tspan id="SvgjsTspan1580" style="text-decoration:;">4. 校验通过则发送成功信</tspan></tspan><tspan id="SvgjsTspan1581" dy="15" x="0"><tspan id="SvgjsTspan1582" style="text-decoration:;">息到MQ，供秒杀服务消</tspan></tspan><tspan id="SvgjsTspan1583" dy="15" x="0"><tspan id="SvgjsTspan1584" style="text-decoration:;">费，同时</tspan><tspan id="SvgjsTspan1585" style="text-decoration:;font-size: inherit;">生成订单信息发</tspan></tspan><tspan id="SvgjsTspan1586" dy="15" x="0"><tspan id="SvgjsTspan1587" style="text-decoration:;font-size: inherit;">送至MQ，供订单服务消</tspan></tspan><tspan id="SvgjsTspan1588" dy="15" x="0"><tspan id="SvgjsTspan1589" style="text-decoration:;font-size: inherit;">费</tspan></tspan></text></g></g><g id="SvgjsG1590" transform="translate(647.7988236961461,762.6416170634925)"><path id="SvgjsPath1591" d="M 0 0L 267.28798185940934 0L 283.28798185940934 16L 283.28798185940934 227.9365079365075L 0 227.9365079365075L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath1592" d="M 267.28798185940934 0L 267.28798185940934 16L 283.28798185940934 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath1593" d="M 0 0L 267.28798185940934 0L 283.28798185940934 16L 283.28798185940934 227.9365079365075L 0 227.9365079365075L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1594"><text id="SvgjsText1595" font-family="微软雅黑" text-anchor="start" font-size="13px" width="264px" fill="#ff0000" font-weight="400" align="top" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="8.375" transform="rotate(0)"><tspan id="SvgjsTspan1596" dy="16" x="10"><tspan id="SvgjsTspan1597" style="text-decoration:;">秒杀消息消费之后流程，不再画出。</tspan></tspan><tspan id="SvgjsTspan1598" dy="16" x="10"><tspan id="SvgjsTspan1599" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1600" dy="16" x="10"><tspan id="SvgjsTspan1601" style="text-decoration:;">主要逻辑为：</tspan></tspan><tspan id="SvgjsTspan1602" dy="16" x="10"><tspan id="SvgjsTspan1603" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1604" dy="16" x="10"><tspan id="SvgjsTspan1605" style="text-decoration:;">1. 通知秒杀服务集群更改秒杀token对应的秒</tspan></tspan><tspan id="SvgjsTspan1606" dy="16" x="10"><tspan id="SvgjsTspan1607" style="text-decoration:;">杀信息</tspan></tspan><tspan id="SvgjsTspan1608" dy="16" x="10"><tspan id="SvgjsTspan1609" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1610" dy="16" x="10"><tspan id="SvgjsTspan1611" style="text-decoration:;">2. 通知订单服务集群创建订单</tspan></tspan><tspan id="SvgjsTspan1612" dy="16" x="10"><tspan id="SvgjsTspan1613" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan1614" dy="16" x="10"><tspan id="SvgjsTspan1615" style="text-decoration:;">秒杀是否成功以是否生成订单为判断依据</tspan></tspan></text></g></g></svg>